{#
/**
 * Date/Time Question - DSFR Theme
 * Type: D (Date/Time)
 *
 * This template renders a date/time input with DSFR styling
 *
 * @var $name           Question name
 * @var $basename       Base name for aria labels
 * @var $coreClass      Core CSS classes
 * @var $dayvalue       Selected day value
 * @var $monthvalue     Selected month value
 * @var $yearvalue      Selected year value
 * @var $hourvalue      Selected hour value
 * @var $minutevalue    Selected minute value
 * @var $dateoutput     Date output div
 * @var $checkconditionFunction
 * @var $dateformat     Date format
 * @var $yearmin        Minimum year
 * @var $yearmax        Maximum year
 * @var $dropdown_dates Use dropdown selects
 * @var $dropdown_size  Dropdown size
 */
#}

<!-- Date/Time (Type D) - DSFR -->
<div class="ls-answers answer-item date-item {{ coreClass }} ls-no-js-hidden fr-mb-3w" role="group" aria-labelledby="ls-question-text-{{ basename }}">
    <div class="fr-grid-row fr-grid-row--gutters">
        <!-- Day - select-item requis pour em_javascript.js -->
        <div class="fr-col-3 select-item">
            <div class="fr-select-group">
                <label for="day{{ name }}" class="fr-label">
                    {{ gT('Day') }}
                </label>
                <select id="day{{ name }}" name="day{{ name }}" class="fr-select day em_sq_validation">
                    <option value="">{{ gT('Day') }}</option>
                    {% for day in 1..31 %}
                        <option value="{{ '%02d'|format(day) }}" {% if dayvalue == '%02d'|format(day) %}selected="selected"{% endif %}>
                            {{ '%02d'|format(day) }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </div>

        <!-- Separator -->
        <div class="fr-col-1 d-flex align-items-center justify-content-center fr-mt-4w">
            <span>/</span>
        </div>

        <!-- Month - select-item requis pour em_javascript.js -->
        <div class="fr-col-3 select-item">
            <div class="fr-select-group">
                <label for="month{{ name }}" class="fr-label">
                    {{ gT('Month') }}
                </label>
                <select id="month{{ name }}" name="month{{ name }}" class="fr-select month em_sq_validation">
                    <option value="">{{ gT('Month') }}</option>
                    <option value="01" {% if monthvalue == '01' %}selected{% endif %}>{{ gT('Jan') }}</option>
                    <option value="02" {% if monthvalue == '02' %}selected{% endif %}>{{ gT('Feb') }}</option>
                    <option value="03" {% if monthvalue == '03' %}selected{% endif %}>{{ gT('Mar') }}</option>
                    <option value="04" {% if monthvalue == '04' %}selected{% endif %}>{{ gT('Apr') }}</option>
                    <option value="05" {% if monthvalue == '05' %}selected{% endif %}>{{ gT('May') }}</option>
                    <option value="06" {% if monthvalue == '06' %}selected{% endif %}>{{ gT('Jun') }}</option>
                    <option value="07" {% if monthvalue == '07' %}selected{% endif %}>{{ gT('Jul') }}</option>
                    <option value="08" {% if monthvalue == '08' %}selected{% endif %}>{{ gT('Aug') }}</option>
                    <option value="09" {% if monthvalue == '09' %}selected{% endif %}>{{ gT('Sep') }}</option>
                    <option value="10" {% if monthvalue == '10' %}selected{% endif %}>{{ gT('Oct') }}</option>
                    <option value="11" {% if monthvalue == '11' %}selected{% endif %}>{{ gT('Nov') }}</option>
                    <option value="12" {% if monthvalue == '12' %}selected{% endif %}>{{ gT('Dec') }}</option>
                </select>
            </div>
        </div>

        <!-- Separator -->
        <div class="fr-col-1 d-flex align-items-center justify-content-center fr-mt-4w">
            <span>/</span>
        </div>

        <!-- Year - select-item requis pour em_javascript.js -->
        <div class="fr-col-3 select-item">
            <div class="fr-select-group">
                <label for="year{{ name }}" class="fr-label">
                    {{ gT('Year') }}
                </label>
                <select id="year{{ name }}" name="year{{ name }}" class="fr-select year em_sq_validation">
                    <option value="">{{ gT('Year') }}</option>
                    {% set currentYear = 'now'|date('Y') %}
                    {% set minYear = yearmin|default(currentYear - 100) %}
                    {% set maxYear = yearmax|default(currentYear + 10) %}
                    {% for year in range(minYear, maxYear) %}
                        <option value="{{ year }}" {% if yearvalue == year %}selected="selected"{% endif %}>
                            {{ year }}
                        </option>
                    {% endfor %}
                </select>
            </div>
        </div>
    </div>
</div>

{# Hidden field for date output #}
{% if dateoutput is defined %}
    {{ dateoutput|raw }}
{% endif %}

{# Hidden field for ExpressionScript Engine #}
{{ C.Html.hiddenField("java"~name, '', ({
    'id': "java"~name,
    'disabled': true
})) }}

<!-- end of Date/Time -->
