{#
/**
 * Dual-scale array with dropdown representation - DSFR Theme
 *
 * @var $answerwidth
 * @var $cellwidth
 * @var $ddprefix
 * @var $ddsuffix
 * @var $basename
 * @var $coreClass
 * @var $leftheader
 * @var $rightheader
 * @var $separatorwidth
 * @var $aSubQuestions
 * @var $labels0
 * @var $labels1
 * @var $interddSep
 */
#}

<!-- answer - DSFR -->
<div class="ls-table-wrapper" role="group" aria-labelledby="ls-question-text-{{ basename }}">
    <div class="fr-table fr-table--bordered" data-fr-js-table="true">
        <table class="{{ coreClass }}">
            <!-- Column groups -->
            <colgroup>
                <col class="answertext" style='width:{{ answerwidth }}%;' />
                <col class="dsheader" style='width:{{ (100 - answerwidth - separatorwidth)/2 }}%;'  {% if leftheader %} role='group' aria-labelledby="left-header-{{ basename }}" {% endif %}/>
                <col class="ddarrayseparator" style='width:{{ separatorwidth }}%'/>
                <col class="dsheader" style='width:{{ (100 - answerwidth - separatorwidth)/2 }}%;' {% if rightheader %} role='group' aria-labelledby="right-header-{{ basename }}" {% endif %}/>
            </colgroup>

            <!-- Header -->
            {% if leftheader != '' or rightheader !='' %}
                <thead>
                    <tr class="ls-heading">
                        <td></td>
                        <th class='left-header fr-text--bold' id='left-header-{{ basename }}'>{{ processString(leftheader) }}</th>
                        <td></td>
                        <th class='right-header fr-text--bold' id='right-header-{{ basename }}'>{{ processString(rightheader) }}</th>
                    </tr>
                </thead>
            {% endif %}

            <tbody>
                <!-- Sub questions -->
                {% for ansrow in aSubQuestions %}
                    <tr id="javatbd{{ ansrow.myfname }}" class="answers-list radio-list {% if ansrow.odd %}ls-odd{% else %}ls-even{% endif %}{% if ansrow.mandatoryviolation %} ls-error-mandatory {% endif %}">
                        <!-- Answer text (actual question) -->
                        <th id="answertext{{ ansrow.myfname }}" class="answertext fr-text--bold{% if ansrow.mandatoryviolation %} fr-error-text{% endif %}">
                            {{ processString(ansrow.question) }}
                            {# Value for expression manager javascript (use id) ; no need to submit #}
                            {{ C.Html.hiddenField("java"~ansrow.myfid0, ansrow.sActualAnswer0, ({
                                'id': "java"~ansrow.myfid0,
                                'disabled': true,
                            })) }}
                            {{ C.Html.hiddenField("java"~ansrow.myfid1, ansrow.sActualAnswer1, ({
                                'id': "java"~ansrow.myfid1,
                                'disabled': true,
                            })) }}
                        </th>

                        <!-- First dropdown - select-item requis pour em_javascript.js -->
                        <td class="answer-item dropdown-item select-item{% if ansrow.mandatoryviolation and ansrow.sActualAnswer0=='' %} fr-input-group--error{% endif %}">
                            {% if leftheader != '' %}
                                <div class='d-block d-md-none leftheader fr-label'>{{ leftheader }}</div>
                            {% endif %}
                            {% if ddsuffix != '' or ddprefix != '' %}
                                <div class="ls-input-group">
                            {% endif %}
                            {% if ddprefix != '' %}
                                <div class="ddprefix ls-input-group-extra">
                                    {{ processString(ddprefix) }}
                                </div>
                            {% endif %}
                            <select
                                class='fr-select em_sq_validation'
                                name="{{ ansrow.myfname0 }}"
                                id="answer{{ ansrow.myfid0 }}"
                                aria-labelledby="answertext{{ ansrow.myfname }}"
                            >
                                <!-- Please choose... -->
                                {% if ansrow.sActualAnswer0 == '' %}
                                    <option value="" selected="selected">
                                        {{ gT('Please choose...') }}
                                    </option>
                                {% endif %}

                                <!-- First label set -->
                                {% for lrow in labels0 %}
                                    <option
                                        value="{{ lrow.code }}"
                                        {% if ansrow.sActualAnswer0 == lrow.code %} selected="selected"{% endif %}>
                                        {{ flatString(processString(lrow.title,1),1) }}
                                    </option>
                                {% endfor %}

                                <!-- No answer -->
                                {% if ansrow.showNoAnswer0 and ansrow.sActualAnswer0 != '' %}
                                    <option value="">{{ gT('No answer') }}</option>
                                {% endif %}
                            </select>
                            {% if ddsuffix != '' %}
                                <div class="ddsuffix ls-input-group-extra">
                                    {{ processString(ddsuffix) }}
                                </div>
                            {% endif %}
                            {% if ddsuffix != '' or ddprefix != '' %}
                                </div>
                            {% endif %}
                        </td>

                        <!-- Separator -->
                        <td class="ddarrayseparator information-item">{{ interddSep }}</td>

                        <!-- Second dropdown - select-item requis pour em_javascript.js -->
                        <td class="answer-item dropdown-item select-item{% if ansrow.mandatoryviolation and ansrow.sActualAnswer1=='' %} fr-input-group--error{% endif %}">
                            {% if rightheader != '' %}
                                <div class='d-block d-md-none rightheader fr-label'>{{ rightheader }}</div>
                            {% endif %}
                            {% if ddprefix != '' or ddsuffix != '' %}
                                <div class="ls-input-group">
                            {% endif %}
                            {% if ddprefix != '' %}
                                <div class="ddprefix ls-input-group-extra">{{ processString(ddprefix) }}</div>
                            {% endif %}
                            <select
                                class='fr-select em_sq_validation'
                                name="{{ ansrow.myfname1 }}"
                                id="answer{{ ansrow.myfid1 }}"
                                aria-labelledby="answertext{{ ansrow.myfname }}"
                            >
                                <!-- Please choose... -->
                                {% if ansrow.sActualAnswer1 == '' %}
                                    <option value="" selected="selected">{{ gT('Please choose...') }}</option>
                                {% endif %}

                                <!-- Second label set -->
                                {% for lrow in labels1 %}
                                    <option
                                        value="{{ lrow.code }}"
                                        {% if ansrow.sActualAnswer1 == lrow.code %} selected="selected"{% endif %}>
                                        {{ flatString(processString(lrow.title,1),1) }}
                                    </option>
                                {% endfor %}

                                <!-- No answer -->
                                {% if ansrow.showNoAnswer1 and ansrow.sActualAnswer1 != '' %}
                                    <option value="">{{ gT('No answer') }}</option>
                                {% endif %}
                            </select>
                            {% if ddsuffix != '' %}
                                <div class="ddsuffix ls-input-group-extra">{{ processString(ddsuffix) }}</div>
                            {% endif %}
                            {% if ddprefix != '' or ddsuffix != '' %}
                                </div>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
<!-- end of answer -->
