{#
/**
 * Long Free Text Question - DSFR Theme
 * Type: T (Long Free Text)
 *
 * This template renders a large textarea for long-form text responses
 *
 * @var $name           Question name
 * @var $value          Current value
 * @var $rows           Number of rows (default from question settings)
 * @var $columns        Number of columns
 * @var $maxlength      Maximum character length
 * @var $inputsize      Input size class
 * @var $kpclass        Additional CSS classes
 * @var $basename       Base name for aria labels
 */
#}

<!-- Long Free Text (Type T) - DSFR avec fr-input-group conforme -->
<!-- Note: answer-item est requis pour que em_javascript.js détecte les événements keyup/change -->
<div class="fr-input-group answer-item text-item {% if empty(kpclass) == false %}{{ kpclass }}{% endif %}">
    {% if help %}
        <span class="fr-hint-text">{{ help }}</span>
    {% endif %}

    <textarea
        class="fr-input {{ inputsize }}"
        name="{{ name }}"
        id="answer{{ name }}"
        rows="{% if drows %}{{ drows }}{% else %}5{% endif %}"
        {% if inputsize %}cols="{{ inputsize }}"{% endif %}
        {% if maxlength %}maxlength="{{ maxlength }}"{% endif %}
        {% if readonly %}readonly="readonly"{% endif %}
        aria-labelledby="ls-question-text-{{ basename }}"
        aria-describedby="answer{{ name }}-messages{% if help %} help-{{ basename }}{% endif %}"
    >{{ dispVal }}</textarea>

    <div class="fr-messages-group" id="answer{{ name }}-messages" aria-live="polite">
        {# Messages d'erreur/succès injectés ici par JavaScript (theme.js) #}
    </div>
</div>

{# Hidden field for ExpressionScript Engine #}
{{ C.Html.hiddenField("java"~name, dispVal, ({
    'id': "java"~name,
    'disabled': true
})) }}

<!-- end of Long Free Text -->
